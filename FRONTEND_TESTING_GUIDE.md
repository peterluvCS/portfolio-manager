# 🧪 Portfolio Manager 前端测试指导方案

## 📋 测试概述

本指导方案帮助团队成员测试Portfolio Manager前端功能，确保所有页面和API集成正常工作。

## 🚀 环境准备

### 1. 确保后端服务器运行
```bash
# 在项目根目录
cd server
npm install
npm start
```

**预期结果**：
- 服务器启动在 `http://localhost:8081`
- 控制台显示：`Server is running on http://localhost:8081`
- 定时任务启动：`启动价格更新定时任务...`

### 2. 启动前端开发服务器
```bash
# 在项目根目录
cd client
npm install
npm start
```

**预期结果**：
- 前端启动在 `http://localhost:3000`
- 浏览器自动打开应用
- 显示深色主题的投资组合管理界面

## 🎯 功能测试清单

### 📊 Dashboard 页面测试

#### 测试项目 1：页面加载
- [ ] 访问 `http://localhost:3000`
- [ ] 确认页面正常加载，无错误
- [ ] 确认侧边栏导航显示正确
- [ ] 确认Dashboard页面内容显示

#### 测试项目 2：投资组合数据
- [ ] 检查总价值卡片显示
- [ ] 检查总盈亏卡片显示（绿色/红色）
- [ ] 检查现金余额卡片显示
- [ ] 检查资产数量卡片显示
- [ ] 检查持仓列表表格显示

#### 测试项目 3：数据刷新
- [ ] 点击浏览器刷新按钮
- [ ] 确认数据重新加载
- [ ] 检查控制台无错误信息

### 💼 Portfolio 页面测试

#### 测试项目 4：页面导航
- [ ] 点击侧边栏"Portfolio"链接
- [ ] 确认页面正确跳转
- [ ] 确认URL变为 `/portfolio`

#### 测试项目 5：投资组合详情
- [ ] 检查投资组合统计信息
- [ ] 检查持仓详情卡片
- [ ] 确认盈亏计算正确（绿色/红色）

#### 测试项目 6：存款/取款功能
- [ ] 点击"Deposit"按钮
- [ ] 确认模态框弹出
- [ ] 输入金额（如：1000）
- [ ] 点击"Confirm"
- [ ] 确认操作成功，现金余额更新
- [ ] 测试取款功能（相同步骤）

### 💹 Trading 页面测试

#### 测试项目 7：页面功能
- [ ] 点击侧边栏"Trading"链接
- [ ] 确认交易界面显示
- [ ] 检查买入/卖出切换按钮

#### 测试项目 8：资产选择
- [ ] 点击资产下拉框
- [ ] 确认显示所有可用资产
- [ ] 选择一个资产（如：AAPL）
- [ ] 确认当前价格自动填充

#### 测试项目 9：交易执行
- [ ] 选择"Buy"模式
- [ ] 选择资产：AAPL
- [ ] 输入数量：10
- [ ] 确认价格显示
- [ ] 点击"BUY AAPL"按钮
- [ ] 确认交易成功消息
- [ ] 测试卖出功能（相同步骤）

#### 测试项目 10：表单验证
- [ ] 不填写任何字段，点击交易按钮
- [ ] 确认显示错误消息
- [ ] 输入无效数据（负数、非数字）
- [ ] 确认表单验证正常工作

### 📜 History 页面测试

#### 测试项目 11：交易历史
- [ ] 点击侧边栏"History"链接
- [ ] 确认交易历史表格显示
- [ ] 检查交易记录详细信息
- [ ] 确认买入/卖出标识正确（绿色/红色）

#### 测试项目 12：数据更新
- [ ] 在Trading页面执行一笔交易
- [ ] 返回History页面
- [ ] 确认新交易记录显示
- [ ] 点击浏览器刷新
- [ ] 确认数据持久化

## 🔧 API 集成测试

### 测试项目 13：价格API
```bash
# 测试价格批量获取
curl http://localhost:8081/api/price/batch
```
**预期结果**：返回所有资产的最新价格

### 测试项目 14：投资组合API
```bash
# 测试投资组合获取
curl http://localhost:8081/api/portfolio
```
**预期结果**：返回投资组合详细信息和盈亏计算

### 测试项目 15：交易API
```bash
# 测试买入交易
curl -X POST http://localhost:8081/api/trade/buy \
  -H "Content-Type: application/json" \
  -d '{"ticker":"AAPL","quantity":5,"price":150.00}'
```
**预期结果**：交易成功，返回确认消息

## 🎨 UI/UX 测试

### 测试项目 16：响应式设计
- [ ] 调整浏览器窗口大小
- [ ] 确认布局自适应
- [ ] 测试移动端显示（F12开发者工具）

### 测试项目 17：深色主题
- [ ] 确认整体深色主题
- [ ] 检查文字对比度
- [ ] 确认功能色彩正确（绿色盈利，红色亏损）

### 测试项目 18：交互反馈
- [ ] 点击按钮确认有hover效果
- [ ] 确认加载状态显示
- [ ] 检查错误消息样式

## 🐛 错误处理测试

### 测试项目 19：网络错误
- [ ] 停止后端服务器
- [ ] 刷新前端页面
- [ ] 确认显示错误消息
- [ ] 重启后端服务器
- [ ] 确认功能恢复正常

### 测试项目 20：API错误
- [ ] 在交易时输入无效数据
- [ ] 确认显示具体错误信息
- [ ] 检查错误消息样式

## 📱 浏览器兼容性测试

### 测试项目 21：多浏览器测试
- [ ] Chrome（推荐）
- [ ] Firefox
- [ ] Safari
- [ ] Edge

### 测试项目 22：开发者工具
- [ ] 打开F12开发者工具
- [ ] 检查Console无错误
- [ ] 检查Network标签页API调用
- [ ] 检查Elements标签页DOM结构

## ⚡ 性能测试

### 测试项目 23：页面加载速度
- [ ] 使用开发者工具Performance标签
- [ ] 记录页面加载时间
- [ ] 确认加载时间在合理范围内（<3秒）

### 测试项目 24：API响应速度
- [ ] 在Network标签页监控API调用
- [ ] 确认API响应时间（<1秒）
- [ ] 检查是否有重复请求

## 🔄 定时任务测试

### 测试项目 25：价格更新
- [ ] 观察后端控制台日志
- [ ] 确认每5分钟执行价格更新
- [ ] 检查更新成功/失败统计
- [ ] 在前端确认价格数据更新

## 📝 测试报告模板

### 测试结果记录
```
测试日期：_________
测试人员：_________
测试环境：Chrome/Firefox/Safari

✅ 通过项目：
❌ 失败项目：
⚠️ 需要注意的问题：

详细问题描述：
1. 问题1：________________
2. 问题2：________________

建议改进：
1. ________________
2. ________________
```

## 🚨 常见问题解决

### 问题1：前端显示空白页面
**解决方案**：
1. 检查后端服务器是否运行
2. 检查浏览器控制台错误
3. 确认API地址配置正确

### 问题2：API调用失败
**解决方案**：
1. 确认后端服务器端口8081
2. 检查CORS配置
3. 确认数据库连接正常

### 问题3：价格数据不更新
**解决方案**：
1. 检查定时任务日志
2. 确认Yahoo API连接
3. 检查数据库权限

### 问题4：交易失败
**解决方案**：
1. 检查现金余额是否足够
2. 确认资产代码正确
3. 检查价格是否合理

## 📞 技术支持

如果遇到问题，请：
1. 检查控制台错误信息
2. 查看后端服务器日志
3. 确认网络连接正常
4. 联系开发团队

---

*本测试指导方案确保Portfolio Manager前端功能的完整性和稳定性。* 